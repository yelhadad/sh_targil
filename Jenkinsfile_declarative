pipeline {
    agent {
        docker { image 'yelhadad/shabak:4' }
    }

    stages {
        stage('Build') {
            steps {
                sh 'python3 /tmp/zip_job.py'
            }
        }
        stage('Publish') {
            steps {
                sh 'curl -uadmin:APAAkZ354d9wQeLTjZeuQbZCfyu -T /tmp/ziped_files "http://localhost:8081/artifactory/example-repo-local/test/"'
            }
        }
    }
}
